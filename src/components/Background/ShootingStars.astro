---
import css from "./stars.module.css";
---

<div class={css["stars-container"]} id="shooting-stars-container">
  <!-- Stars will be injected here by JS -->
</div>

<script>
  import css from "./stars.module.css";

  let intervalId;

  function initShootingStars() {
    const container = document.getElementById("shooting-stars-container");

    if (intervalId) {
      clearInterval(intervalId);
    }

    if (container) {
      intervalId = setInterval(() => {
        const star = document.createElement("div");
        star.classList.add(css["shooting-star"]);

        const top = 40 + Math.random() * 20 + "%";
        const left = Math.random() * 40 + "%";
        const rotate = Math.random() * (135 - 35) + 35;

        star.style.top = top;
        star.style.left = left;
        star.style.setProperty("--rotate", `${rotate}deg`);

        container.appendChild(star);

        setTimeout(() => {
          star.remove();
        }, 5000);
      }, 2000);
    }
  }

  document.addEventListener("astro:page-load", initShootingStars);
</script>
